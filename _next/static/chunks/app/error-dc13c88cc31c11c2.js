(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8039],{48219:(e,r,t)=>{Promise.resolve().then(t.bind(t,87460))},50768:(e,r,t)=>{"use strict";t.d(r,{R:()=>f,s:()=>h});let n=!1,a=[/loading chunk/i,/chunkloaderror/i,/chunk loading failed/i],o=["chrome-extension:","moz-extension:","safari-extension:"],s=[/turnstile/i],i=e=>!!e&&o.some(r=>e.startsWith(r)),l=e=>!!e&&o.some(r=>e.includes(r)),d=e=>!!e&&a.some(r=>r.test(e)),c=e=>!!e&&e.toLowerCase().includes("extension context invalidated"),u=e=>{if(!e)return!1;let r=e.toLowerCase();return s.every(e=>e.test(r))},m=e=>{if(!e)return!1;let r=e.toLowerCase();return!!(r.includes("cannot read property 'document' of null")||r.includes("cannot read properties of null (reading 'document'")||r.includes("null is not an object")&&r.includes("contentwindow.document")||r.includes("cannot prefetch")&&r.includes("cannot be converted to a url")||r.includes("window.webkit.messagehandlers")||r.includes("failed to execute 'removechild' on 'node'")||r.includes("getresult is not defined"))},f=()=>{n||(n=!0,window.addEventListener("error",e=>{let r,t;if(r=e.error,t=e.filename??null,(e=>{let r=e.target;if(!r||!("tagName"in r))return!1;let t=r.tagName;return"SCRIPT"===t||"LINK"===t})(e)||d(e.message)||d(r?.message)||d(r?.name)||"Script error."===e.message&&!t||i(t)||l(r?.stack)||c(e.message)||c(r?.message)||u(e.message)||u(r?.message)||m(e.message)||m(r?.message)||0)return;let n=e.error;h({message:e.message??n?.message??"Unknown window error",name:n?.name??"Error",stack:n?.stack??null,severity:"error",componentStack:null,route:window.location.pathname,metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno},tags:["window_error"]})}),window.addEventListener("unhandledrejection",e=>{let r=e.reason;if((e=>{if(!e)return!1;if(e instanceof Error)return!!(d(e.message)||d(e.name)||l(e.stack)||c(e.message)||i(e.stack??"")||u(e.message)||m(e.message));if("string"==typeof e)return d(e)||c(e)||u(e)||m(e);if("object"==typeof e&&"message"in e){let r=e.message;if("string"==typeof r)return d(r)||c(r)||u(r)||m(r)}return!1})(r))return;let t=r instanceof Error?r:Error("string"==typeof r?r:JSON.stringify(r,null,2));h({message:t.message,name:t.name,stack:t.stack??null,severity:"error",route:window.location.pathname,metadata:{source:"unhandledrejection"},tags:["unhandled_rejection"]})}))},h=async e=>{let r,t=g(e);try{if(r=await fetch("/api/telemetry/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}),401===r.status&&(r=await fetch("/api/telemetry/errorsP",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})),!r.ok)return{eventId:null,errorId:null};let e=await r.json().catch(()=>null);if(e&&(e.eventId||e.errorId)){let r="string"==typeof e.eventId?e.eventId:null,n="string"==typeof e.errorId?e.errorId:null;{let e=window;r&&(e.__gunsLastTelemetryEventId=r),n&&(e.__gunsLastTelemetryErrorId=n),window.dispatchEvent(new CustomEvent("guns:telemetry-event",{detail:{eventId:r,errorId:n}}))}return console.error(`[telemetry] error=${n??"none"} event=${r??"none"} route=${t.route}`),{eventId:r,errorId:n}}}catch(e){console.warn("[telemetry] Failed to report error",e)}return{eventId:null,errorId:null}},g=e=>{let r=w(),t=e.route??window.location.pathname,n=b(t??"/"),a=p("undefined"!=typeof navigator?navigator.userAgent??null:null),o=e.viewport??{width:window.innerWidth,height:window.innerHeight},s={...e.metadata??{},...a?{environment:a}:{},rawRoute:t,normalizedRoute:n};return{...e,href:r,route:n,viewport:o,metadata:s}},w=()=>{try{let{pathname:e}=window.location;return e||"/"}catch{return null}},p=e=>{if(!e)return null;let r=e.toLowerCase(),t="unknown",n="unknown",a="desktop";return/edg\//.test(r)?t="edge":/chrome\//.test(r)?t="chrome":/safari\//.test(r)&&!/chrome\//.test(r)?t="safari":/firefox\//.test(r)?t="firefox":/msie|trident/.test(r)&&(t="ie"),/windows nt/.test(r)?n="windows":/mac os x/.test(r)?n="macos":/android/.test(r)?n="android":/iphone|ipad|ipod/.test(r)?n="ios":/linux/.test(r)&&(n="linux"),/bot|crawler|spider|crawling/.test(r)?a="bot":/ipad/.test(r)?a="tablet":/iphone|android.+mobile/.test(r)&&(a="mobile"),{browser:t,os:n,device:a}},b=e=>{if(!e)return"/";let[r]=e.split(/[?#]/,1),t=r.split("/").map(e=>e?/^[0-9]+$/.test(e)&&e.length>=3?":int":/^[0-9a-f]{16,}$/i.test(e)?":hex":/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?":uuid":/^[0-9a-z_-]{12,}$/i.test(e)?":id":/^\d{4}-\d{2}-\d{2}$/.test(e)?":date":e:e).join("/");return t.startsWith("/")?t:`/${t}`}},70063:()=>{},87460:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var n=t(95155),a=t(12115);t(70063);var o=t(98500),s=t.n(o),i=t(98241),l=t.n(i),d=t(98410),c=t.n(d),u=t(54834),m=t(50768),f=t(96351);function h({error:e}){let r=(0,f.kj)(),[t,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),h=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{h.current||(h.current=!0,(0,m.s)({message:e?.message??"Global error boundary triggered",name:e?.name??"GlobalErrorBoundary",stack:e?.stack??null,severity:"error",route:window.location.pathname,metadata:{source:"global-error-boundary"},tags:["global_error_boundary"]}).then(({eventId:e,errorId:r})=>{e&&o(e),r&&d(r)}))},[e]),(0,n.jsxs)("div",{className:l().containerWrapper,children:[(0,n.jsxs)("div",{className:`${l().container} ${c().card}`,children:[(0,n.jsx)("div",{className:l().headIcon,children:u.A.error}),(0,n.jsx)("h1",{className:l().headline,children:r("errors.frontend.global_error.title")}),(0,n.jsx)("h3",{className:`${l().subheadline} ${c().subtitle}`,children:r("errors.frontend.global_error.message")}),(0,n.jsxs)("div",{className:c().buttonRow,children:[(0,n.jsx)("button",{type:"button",onClick:()=>window.location.reload(),className:`${l().button} ${l().buttonPrimary}`,children:r("errors.frontend.global_error.reload_page")}),(0,n.jsx)(s(),{href:"https://status.guns.lol",target:"_blank",className:`${l().button} ${l().buttonSecondary}`,children:r("errors.frontend.global_error.check_status")})]})]}),i&&t&&(0,n.jsx)("div",{className:c().errorInformationContainer,children:(0,n.jsxs)("div",{className:c().errorInformationList,children:[(0,n.jsxs)("div",{className:c().errorInformationCard,children:[(0,n.jsx)("span",{className:c().errorInformationLabel,children:"Error ID"}),(0,n.jsx)("span",{className:c().errorInformationValue,children:i})]}),(0,n.jsxs)("div",{className:c().errorInformationCard,children:[(0,n.jsx)("span",{className:c().errorInformationLabel,children:"Event ID"}),(0,n.jsx)("span",{className:c().errorInformationValue,children:t})]})]})})]})}},98410:e=>{e.exports={card:"GUNS__3a-53cd6657-24bee4fb-db885458",subtitle:"GUNS__70-263da991-087cbdc6-4de83355",buttonRow:"GUNS__d6-149930b2-c76c2c44-6f0ac1ea",errorInformationContainer:"GUNS__08-3d3f5ac7-c4f56b2c-aa02d2d1",errorInformationList:"GUNS__d6-69a9174f-8d3960e2-83536abd",errorInformationCard:"GUNS__7c-fd1dd9d4-eff2f4c3-09775a46",errorInformationLabel:"GUNS__5a-2cb9440a-5b85ad6a-35c46142",errorInformationValue:"GUNS__c9-a3cbd3c0-b4f93143-b17f8747"}}},e=>{e.O(0,[7020,4726,6773,8500,3200,8441,3794,7358],()=>e(e.s=48219)),_N_E=e.O()}]);