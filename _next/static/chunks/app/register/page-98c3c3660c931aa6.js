(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2454],{5585:e=>{e.exports={overlay:"GUNS__2a-ec424462-e2d1ad6f-42d31c98",modal:"GUNS__c9-9f956df0-2aa75d71-7434650d","overlay-fade-in":"GUNS__28-fac3e645-eb45c253-1613aaec","overlay-fade-out":"GUNS__08-a43818b0-b02ed44f-26fc9b5d","modal-scale-in":"GUNS__f8-f3bfe6a6-ed71fab1-6cb58cec","modal-scale-out":"GUNS__d9-8be0fc70-7c7db8fc-95d242f5",header:"GUNS__c6-de21a81f-58192bf7-b172e0ea",title:"GUNS__2a-e1e76140-19cae230-28ef5727",closeButton:"GUNS__8f-a6cb3991-90ec747f-4d7f9d93",body:"GUNS__28-d82a957e-1d95260e-e1b07846"}},11633:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var a=r(95155),n=r(12115),s=r(23219),l=r.n(s),i=r(75810);let o={email:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"currentColor",d:"M13.425 11.9q.275.2.575.2t.575-.2L21 7.425V5l-7 4.85L7 5v2.425zM3 21q-.825 0-1.412-.587T1 19V7.5q0-.425.288-.712T2 6.5q.425 0 .713.288T3 7.5V19h15.5q.425 0 .713.288T19.5 20q0 .425-.288.713T18.5 21zm4-4q-.825 0-1.412-.587T5 15V5q0-.825.588-1.412T7 3h14q.825 0 1.413.588T23 5v10q0 .825-.587 1.413T21 17z"})}),password:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:(0,a.jsx)("path",{fill:"currentColor",d:"M160 16a80.07 80.07 0 0 0-76.09 104.78l-57.57 57.56A8 8 0 0 0 24 184v40a8 8 0 0 0 8 8h40a8 8 0 0 0 8-8v-16h16a8 8 0 0 0 8-8v-16h16a8 8 0 0 0 5.66-2.34l9.56-9.57A80 80 0 1 0 160 16m20 76a16 16 0 1 1 16-16a16 16 0 0 1-16 16"})}),username:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"currentColor",d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})}),loading:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[(0,a.jsx)("path",{strokeDasharray:"60",strokeDashoffset:"60",strokeOpacity:".3",d:"M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z",children:(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"1.3s",values:"60;0"})}),(0,a.jsxs)("path",{strokeDasharray:"15",strokeDashoffset:"15",d:"M12 3C16.9706 3 21 7.02944 21 12",children:[(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.3s",values:"15;0"}),(0,a.jsx)("animateTransform",{attributeName:"transform",dur:"1.5s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})]})]})})};var c=r(37897),d=r(73321),u=r(81934),h=r(96351),f=r(57776),p=r(40428),m=r(87358);let g=["gmail.com","googlemail.com","icloud.com","me.com","mac.com","outlook.com","hotmail.com","live.com","msn.com","yahoo.com","yahoo.co.uk","yahoo.de","yahoo.fr","proton.me","protonmail.com","pm.me","tutanota.com","tuta.io","posteo.de","riseup.net","mailbox.org","gmx.de","gmx.net","web.de","t-online.de","freenet.de","arcor.de","vodafone.de","online.de","bluewin.ch","orange.fr","wanadoo.fr","laposte.net","libero.it","aol.com","mail.com","inbox.com","zoho.com","fastmail.com","yandex.com","yandex.ru"];function x(e){return e.toLowerCase().replace(/[^a-z0-9._-]/g,"").replace(/\.{2,}/g,".").slice(0,32)}function _(){let e=(0,h.kj)(),t=(0,d.useRouter)(),r=(0,n.useRef)(null),s=(0,d.useSearchParams)(),_=s.get("claim")||"",v=s.get("ref")||"",[w,b]=(0,n.useState)(!1),[N,j]=(0,n.useState)(!1),[y,S]=(0,n.useState)(""),[k,C]=(0,n.useState)(null),[U,G]=(0,n.useState)(""),[A,E]=(0,n.useState)(x(_)),[$,L]=(0,n.useState)(""),[T,W]=(0,n.useState)(e("auth.register.signup_button")),[B,q]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=x(A);e!==A&&E(e)},[A]),(0,n.useEffect)(()=>{if(!y||!y.includes("@"))return void C(null);let e=function(e){let t=e.split("@");if(2!==t.length)return null;let[r,a]=t;if(!r||!a)return null;let n=null;for(let e of g){let t=function(e,t){if(e===t)return 0;let r=e.length,a=t.length;if(!r)return a;if(!a)return r;let n=Array.from({length:r+1},()=>Array(a+1).fill(0));for(let e=0;e<=r;e++)n[e][0]=e;for(let e=0;e<=a;e++)n[0][e]=e;for(let s=1;s<=r;s++)for(let r=1;r<=a;r++){let a=+(e[s-1]!==t[r-1]);n[s][r]=Math.min(n[s-1][r]+1,n[s][r-1]+1,n[s-1][r-1]+a)}return n[r][a]}(a,e);t<=2&&(!n||t<n.dist)&&(n={candidate:`${r}@${e}`,dist:t})}return n?.candidate??null}(y);C(e&&e!==y?e:null)},[y]);let P=(0,n.useMemo)(()=>{let e;return e=0,U.length>=8&&e++,/[A-Z]/.test(U)&&e++,/[a-z]/.test(U)&&e++,/[0-9]/.test(U)&&e++,/[^A-Za-z0-9]/.test(U)&&e++,Math.min(e,5)},[U]),z=e=>{"Enter"===e.key&&(e.preventDefault(),D())},D=()=>(L(""),N)?/^(?!.{255,})([a-zA-Z0-9_+.'-]{1,64})@([a-zA-Z0-9.-]{1,190})\.[a-zA-Z]{2,24}$/.test(y)?U.length<8?L(e("auth.register.error_password_length",{length:8})):A?P<2?L(e("auth.register.error_weak_password")):void b(!0):L(e("auth.register.error_invalid_username")):L(e("auth.register.error_invalid_email")):L(e("auth.register.error_accept_tos")),R=async r=>{try{q(!0),W(o.loading),L(""),b(!1);let a={email:y.trim(),password:U,username:x(A),captcha:r,ref:v},n=m.env.NEXT_PUBLIC_API_URL||"https://guns.lol",s=await fetch(`${n}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await s.json();if(s.ok){let e=btoa(a.email);t.push(`/sent?e=${e}&token=${l.resendToken}`)}else L(l?.error),W(e("auth.register.signup_button"))}finally{q(!1),W(e("auth.register.signup_button"))}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{opened:w,centered:!0,withCloseButton:!1,onClose:()=>b(!1),title:e("auth.register.verify_captcha"),centerTitle:!0,children:(0,a.jsx)("div",{className:l().captchaWrapper,children:(0,a.jsx)(i.A,{sitekey:"227fe119-8d9e-490c-a0f0-5d9f8a41174d",onVerify:e=>R(e),theme:"dark",ref:r})})}),(0,a.jsx)("div",{className:l().registerContainerWrapper,children:(0,a.jsxs)("div",{className:`${l().registerContainer} ${B?l().isBusy:""}`,children:[(0,a.jsxs)("div",{className:l().logoContainer,children:[(0,a.jsx)(u.A,{href:"/",className:"flex",children:(0,a.jsx)("img",{src:"https://assets.guns.lol/guns_logo_no_background_cropped_xmas.png",alt:"guns.lol"})}),(0,a.jsx)("h1",{children:e("auth.register.create_account",{dot:(0,a.jsx)("span",{className:l().dot,children:"."})})})]}),(0,a.jsxs)("div",{className:l().signUp,children:[(0,a.jsxs)("div",{className:l().inputRow,children:[(0,a.jsx)(c.A,{onKeyPress:z,featureName:e("auth.register.email_input_text"),value:y,onChangeFunction:e=>S(e.target.value.trim()),placeholder:e("auth.register.email_input_text"),icon:o.email}),k&&(0,a.jsx)("div",{className:l().emailHint,children:e("auth.register.did_you_mean",{suggestion:(0,a.jsx)("button",{type:"button",className:l().pill,onClick:()=>S(k),children:k})})})]}),(0,a.jsxs)("div",{className:l().inputRow,children:[(0,a.jsx)(c.A,{onKeyPress:z,featureName:e("auth.register.password_input_text"),value:U,onChangeFunction:e=>G(e.target.value),placeholder:e("auth.register.password_input_text"),icon:o.password,viewPassword:!0}),U&&(0,a.jsxs)("div",{className:l().pwMeter,children:[[1,2,3,4,5].map(e=>(0,a.jsx)("span",{className:`${l().pwBar} ${P>=e?l().pwOn:""}`},e)),(0,a.jsx)("span",{className:l().pwLabel,children:e(`auth.register.password_score.${P}`)})]})]}),(0,a.jsx)(c.A,{onKeyPress:z,featureName:e("auth.register.username_input_text"),value:A,onChangeFunction:e=>E(e.target.value),placeholder:"",icon:o.username,prefix:"guns.lol/",prefixLength:100})]}),(0,a.jsxs)("div",{className:l().agreement,children:[(0,a.jsx)(p.A,{checked:N,onChange:e=>j(e.currentTarget.checked)}),(0,a.jsx)("h1",{children:e("auth.register.i_agree_to",{tos:(0,a.jsx)(u.A,{href:"/terms",target:"_blank",children:"ToS"}),pp:(0,a.jsx)(u.A,{href:"/privacy",target:"_blank",children:"Privacy Policy"})})})]}),(0,a.jsxs)("div",{className:l().registerButtonContainer,children:[""!==$&&(0,a.jsx)("div",{className:l().errorContainer,children:(0,a.jsx)("span",{children:$})}),(0,a.jsx)("span",{className:l().registerButton,onClick:D,children:T}),(0,a.jsx)("span",{className:l().signedUp,children:e("auth.register.login_text",{login:(0,a.jsx)(u.A,{href:"/login",children:e("auth.register.login_text_link")})})})]})]})})]})}},23219:e=>{e.exports={registerContainerWrapper:"GUNS__7d-8f826bf0-857e8706-e2a564b5",registerContainer:"GUNS__64-bb883117-9de93c16-7ee56a9a",logoContainer:"GUNS__a2-de56f45f-37e0832a-6d1a2c5b",dot:"GUNS__66-6bfc171f-259c7c06-ff307458",signUp:"GUNS__33-25f31def-0eaf6aa6-86c711a6",errorContainer:"GUNS__c1-a1dc1a31-d76878d5-6eaf791e",registerButton:"GUNS__00-9edd492a-b9af5bf4-94c7a8c8",registerButtonContainer:"GUNS__b6-b2e46f10-9021b9e1-202681f5",signedUp:"GUNS__c3-3a884679-f8622df4-94b0aac9",agreement:"GUNS__07-500f0d54-2b8f11c7-4ef2251f",captchaWrapper:"GUNS__20-c41976d3-2b3e242a-6af0406b",emailHint:"GUNS__ec-f05e2319-df29a87c-8f8d044a",pill:"GUNS__2a-7ebd2457-a80483c6-dced11f9",pwMeter:"GUNS__4f-eb5697a1-b330b624-067f1515",pwBar:"GUNS__2e-cbfec80e-96ce0297-4cbe06f3",pwOn:"GUNS__63-cbff99b8-7a72af05-53725f61",pwLabel:"GUNS__f7-9a72db3a-6ee7c14f-d90c79c8",inputRow:"GUNS__40-c696d5d5-37ad850a-1b5a8ee7"}},37897:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(95155),n=r(12115),s=r(98241),l=r.n(s),i=r(54834);function o({featureName:e,onChangeFunction:t,value:r,placeholder:s,icon:o,prefix:c,prefixLength:d,viewPassword:u,onKeyPress:h,isImageUrl:f,...p}){let m=(0,n.useRef)(null),[g,x]=(0,n.useState)(u);return(0,n.useEffect)(()=>{m.current&&(m.current.type=g?"password":"text")},[g]),(0,a.jsxs)("div",{className:l().inputContainerWrapper,children:[(0,a.jsx)("h1",{className:l().featureName,children:e}),(0,a.jsxs)("div",{className:`${l().inputWrapperDiv} ${c&&l().inputWrapperURL}`,children:[(0,a.jsxs)("span",{className:l().inputWrapperSpan,style:{position:c?"absolute":"static"},children:[f?(0,a.jsx)("img",{src:o,alt:"icon",className:l().inputWrapperIconImage}):o,c&&(0,a.jsx)("h1",{children:c})]}),u&&(0,a.jsx)("p",{onClick:()=>{x(!g)},children:g?i.A.hidePassword:i.A.views}),(0,a.jsx)("input",{autoCorrect:"false",type:g?"password":"text",onKeyDown:h,value:r,style:{paddingLeft:c?d:"",paddingRight:u?47:""},placeholder:s,className:l().inputWrapperInput,onChange:t,...p,ref:m})]})]})}},40428:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(95155),n=r(12115),s=r(59931),l=r.n(s);function i({checked:e,onChange:t,label:r,description:s,disabled:i=!1,name:o,id:c,className:d}){let u=(0,n.useId)(),h=c??u,f=(0,a.jsx)("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});return(0,a.jsxs)("label",{className:`${l().checkboxWrapper} ${d??""}`,"data-disabled":i,"data-checked":e,htmlFor:h,children:[(0,a.jsx)("input",{type:"checkbox",id:h,name:o,checked:e,onChange:t,disabled:i}),(0,a.jsx)("span",{className:l().checkboxBox,children:(0,a.jsx)("span",{className:l().checkmark,children:f})}),(r||s)&&(0,a.jsxs)("span",{className:l().checkboxContent,children:[r&&(0,a.jsx)("span",{className:l().label,children:r}),s&&(0,a.jsx)("span",{className:l().description,children:s})]})]})}},57776:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(95155),n=r(12115),s=r(47650),l=r(5585),i=r.n(l);function o({opened:e,onClose:t,title:r,centered:l=!0,size:o="auto",closeOnOverlayClick:c=!0,withCloseButton:d=!0,centerTitle:u=!1,className:h,bodyClassName:f,children:p}){let[m,g]=(0,n.useState)(e),[x,_]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),b=(0,n.useRef)(null),N=(0,n.useRef)(null),j=(0,n.useRef)(null),y=e=>{if(!e)return!1;let t=window.getComputedStyle(e).overflowY;return e.scrollHeight>e.clientHeight+1&&("auto"===t||"scroll"===t)},S=e=>{let t=N.current;if(!t||!e)return null;let r=e;for(;r&&t.contains(r);){if(y(r))return r;r=r.parentElement}return null},k=(e,t)=>t<0?e.scrollTop>0:!(t>0)||e.scrollTop+e.clientHeight<e.scrollHeight;if((0,n.useEffect)(()=>{if(e){g(!0),_(!1);return}return _(!0),b.current=setTimeout(()=>{g(!1),_(!1)},180),()=>{b.current&&(clearTimeout(b.current),b.current=null)}},[e]),(0,n.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.createElement("div");return document.body.appendChild(e),w(e),()=>{document.body.removeChild(e),w(null)}},[]),(0,n.useEffect)(()=>{if(!m)return;let e=e=>{"Escape"===e.key?t():["ArrowUp","ArrowDown","PageUp","PageDown","Home","End"," "].includes(e.key)&&!N.current?.contains(e.target)&&e.preventDefault()},r=e=>{let t=N.current;if(!t)return void e.preventDefault();let r=e.target;if(!(r&&t.contains(r)))return void e.preventDefault();if(e instanceof WheelEvent){let t=S(r);t&&k(t,e.deltaY)||e.preventDefault();return}if(e instanceof TouchEvent){let t=e.touches[0]?.clientY??null,a=j.current;j.current=t;let n=S(r);n&&k(n,null!==a&&null!==t?a-t:0)||e.preventDefault()}},a={passive:!1};return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("wheel",r,a),window.addEventListener("touchmove",r,a),()=>{window.removeEventListener("keydown",e),window.removeEventListener("wheel",r,a),window.removeEventListener("touchmove",r,a)}},[k,S,t,m]),(0,n.useEffect)(()=>{if(!m)return;let e=e=>{if(!N.current?.contains(e.target)){j.current=null;return}j.current=e.touches[0]?.clientY??null};return window.addEventListener("touchstart",e,{passive:!0}),()=>window.removeEventListener("touchstart",e)},[m]),!m||!v)return null;let C="number"==typeof o?`${o}px`:o,U={};C&&"auto"!==C?U.maxWidth=C:(U.width="fit-content",U.maxWidth="clamp(100%, 100%, 850px)",U.boxSizing="border-box");let G=x?"closing":"open",A=(0,a.jsx)("div",{className:i().overlay,"data-centered":l,"data-state":G,onClick:()=>{c&&t()},children:(0,a.jsxs)("div",{className:`${i().modal} ${h??""}`,"data-state":G,style:U,ref:N,onClick:e=>e.stopPropagation(),children:[(r||d)&&(0,a.jsxs)("div",{className:i().header,children:[r&&(0,a.jsx)("h2",{className:i().title,style:u?{textAlign:"center",width:"100%"}:{},children:r}),d&&(0,a.jsx)("button",{type:"button",className:i().closeButton,onClick:t,children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"7.43 7.45 9.15 9.15",children:(0,a.jsx)("path",{fill:"currentColor",d:"m12 13.4l-2.9 2.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l2.9-2.9l-2.9-2.875q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l2.9 2.9l2.875-2.9q.275-.275.7-.275t.7.275q.3.3.3.713t-.3.687L13.375 12l2.9 2.9q.275.275.275.7t-.275.7q-.3.3-.712.3t-.688-.3z"})})})]}),(0,a.jsx)("div",{className:`${i().body} ${f??""}`,children:p})]})});return(0,s.createPortal)(A,v)}},59931:e=>{e.exports={checkboxWrapper:"GUNS__53-fb7620db-5edbb5d3-d5838081",checkboxBox:"GUNS__e5-546bd132-f2783efa-b167c221",checkmark:"GUNS__37-9c3ca347-1dfc372f-b86cd6fc",checkboxContent:"GUNS__ab-99239a2d-372d534a-01c82082",label:"GUNS__41-9e476fd0-97f08255-c536c341",description:"GUNS__09-9ac6549b-7658a140-3ba7fea8"}},81934:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(95155),n=r(98500),s=r.n(n),l=r(96351);function i({href:e,asTag:t,locale:r,children:n,...i}){let o=r||(0,l.useLang)();if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("mailto:")||e.startsWith("tel:"))return t?(0,a.jsx)("a",{href:e,...i,children:n}):(0,a.jsx)(s(),{href:e,...i,children:n});let c="en"==o?`${e.startsWith("/")?"":"/"}${e}`:`/${o}${e.startsWith("/")?"":"/"}${e}`;return t?(0,a.jsx)("a",{href:c,...i,children:n}):(0,a.jsx)(s(),{href:c,...i,children:n})}},85075:(e,t,r)=>{Promise.resolve().then(r.bind(r,11633))}},e=>{e.O(0,[5800,4726,8500,9014,3200,8441,3794,7358],()=>e(e.s=85075)),_N_E=e.O()}]);