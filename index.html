<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Gooning Leaderboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#050505;--glass:#111111ee;--glass-border:rgba(255,255,255,.08);
      --text:#f5f5f5;--muted:#aaaaaa;--accent:#fff;--discord:#ccc;
      --transition:.35s cubic-bezier(.25,.8,.25,1);
      --scrollbar:#444;--scrollbar-hover:#666;
      --goon:#ff4d8c;--stamina:#4dff88;
      font-family:'Inter',system-ui,sans-serif;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html,body{min-height:100vh;background:var(--bg);overflow:hidden;color:var(--text);
      display:flex;justify-content:center;align-items:center;padding:12px}
    .stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
    .star{position:absolute;background:#fff;border-radius:50%;opacity:0;animation:fall linear infinite}
    @keyframes fall{0%{transform:translateY(-100px) scale(.2);opacity:0}10%{opacity:1}90%{opacity:.3}100%{transform:translateY(100vh) scale(.8);opacity:0}}
    #app{
      max-width:1000px;width:100%;position:relative;z-index:1;
      backdrop-filter:blur(20px);background:var(--glass);
      border:1px solid var(--glass-border);border-radius:22px;
      padding:32px 36px;
      box-shadow:0 16px 60px rgba(0,0,0,.8),inset 0 0 35px rgba(255,255,255,.05);
      transition:all .5s var(--transition);transform:scale(1.04);margin:auto
    }
    #app:hover{transform:scale(1.06) translateY(-6px);box-shadow:0 24px 80px rgba(0,0,0,.9),0 0 40px rgba(255,255,255,.12)}
    h1{
      text-align:center;font-weight:800;font-size:2.4rem;letter-spacing:2.2px;
      background:linear-gradient(90deg,#fff,#ccc);background-clip:text;-webkit-background-clip:text;color:transparent;
      text-shadow:0 0 30px rgba(255,255,255,.3);margin-bottom:26px;
      animation:titleGlow 3s ease-in-out infinite alternate
    }
    @keyframes titleGlow{from{text-shadow:0 0 20px rgba(255,255,255,.3)}to{text-shadow:0 0 40px rgba(255,255,255,.5),0 0 80px rgba(255,255,255,.2)}}
    .tabs{display:flex;justify-content:center;gap:18px;margin-bottom:26px}
    .tab{
      padding:13px 30px;background:rgba(255,255,255,.06);border:1px solid var(--glass-border);
      border-radius:14px;font-weight:600;font-size:.96rem;cursor:pointer;transition:all .3s var(--transition);
      color:var(--muted);backdrop-filter:blur(4px)
    }
    .tab.active{
      background:rgba(255,255,255,.16);color:var(--accent);border-color:rgba(255,255,255,.22);
      box-shadow:0 0 20px rgba(255,255,255,.12);transform:translateY(-2px)
    }
    .tab:hover:not(.active){background:rgba(255,255,255,.1);transform:translateY(-2px)}
    .panel{display:none;animation:fadeIn .6s ease}
    .panel.active{display:block}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    /* ────── WIDER & SHORTER LEADERBOARD ────── */
    .table-container{
      max-height:58vh;overflow-y:auto;border-radius:16px;margin-top:18px;
      border:1px solid var(--glass-border);background:rgba(0,0,0,.22);
      box-shadow:inset 0 6px 14px rgba(0,0,0,.4);scrollbar-width:thin;scrollbar-color:var(--scrollbar) transparent
    }
    .table-container::-webkit-scrollbar{width:10px}
    .table-container::-webkit-scrollbar-track{background:transparent}
    .table-container::-webkit-scrollbar-thumb{
      background:var(--scrollbar);border-radius:6px;border:2px solid transparent;background-clip:content-box
    }
    .table-container::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-hover);background-clip:content-box}
    table{width:100%;border-collapse:collapse}
    thead{
      position:sticky;top:0;z-index:10;
      background:linear-gradient(180deg,rgba(25,25,25,.98),rgba(15,15,15,.95));
      backdrop-filter:blur(12px);text-transform:uppercase;font-size:.78rem;letter-spacing:1.7px;
      color:var(--muted);border-bottom:1px solid var(--glass-border)
    }
    th,td{padding:18px 22px;transition:all .3s var(--transition)}
    tr:hover{background:rgba(255,255,255,.09);transform:translateX(6px);box-shadow:0 8px 20px rgba(255,255,255,.08)}
    .rank{font-weight:800;color:var(--accent);font-size:1.45rem;text-align:center;text-shadow:0 0 12px rgba(255,255,255,.4)}
    .rank:nth-of-type(1){color:#ffd700;font-size:1.65rem;text-shadow:0 0 24px #ffd700}
    .rank:nth-of-type(2){color:#c0c0c0;font-size:1.6rem;text-shadow:0 0 20px #c0c0c0}
    .rank:nth-of-type(3){color:#cd7f32;font-size:1.55rem;text-shadow:0 0 18px #cd7f32}
    .name{display:flex;align-items:center;gap:20px;font-size:1.04rem}
    .avatar{width:56px;height:56px;border-radius:14px;overflow:hidden;
      box-shadow:0 0 18px rgba(0,0,0,.5),0 0 0 1px rgba(255,255,255,.15);flex-shrink:0;transition:transform .3s ease}
    tr:hover .avatar{transform:scale(1.18) rotate(6deg)}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .discord-tag{display:flex;align-items:center;gap:8px;font-size:.86rem;color:var(--discord);margin-top:3px}
    .discord-tag i{filter:drop-shadow(0 0 6px #5865f2);animation:discordPulse 2.5s infinite alternate}
    @keyframes discordPulse{from{filter:drop-shadow(0 0 6px #5865f2)}to{filter:drop-shadow(0 0 14px #5865f2)}}
    .empty-slot{color:#666;font-style:italic;font-size:1rem}

    /* ────── MINI‑GAMES GRID (ONLY GOON CLICKER) ────── */
    .game-grid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:22px;
      margin-top:20px
    }
    .game-box{
      background:rgba(0,0,0,.2);border:1px solid var(--glass-border);border-radius:18px;
      padding:30px;text-align:center;cursor:pointer;transition:.3s;backdrop-filter:blur(8px)
    }
    .game-box:hover{
      background:rgba(255,77,140,.15);transform:translateY(-6px);box-shadow:0 0 30px rgba(255,77,140,.3)
    }
    .game-box h3{
      font-size:1.45rem;margin-bottom:12px;color:var(--goon);text-shadow:0 0 12px var(--goon)
    }
    .game-box p{font-size:.94rem;color:var(--muted);margin:8px 0}

    #loader{
      position:fixed;inset:0;background:var(--bg);
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      transition:opacity 1s ease;z-index:100;cursor:pointer
    }
    #logo{
      font-size:3.8rem;font-weight:900;text-transform:uppercase;color:var(--accent);
      letter-spacing:6px;background:linear-gradient(45deg,#fff,#aaa);
      background-clip:text;-webkit-background-clip:text;color:transparent;
      animation:glow 2.5s ease-in-out infinite alternate
    }
    @keyframes glow{from{text-shadow:0 0 15px var(--accent),0 0 30px var(--accent);opacity:.9}to{text-shadow:0 0 50px var(--accent),0 0 100px var(--accent);opacity:1}}
    .last-updated{font-size:.79rem;color:var(--muted);text-align:center;margin:18px 0 12px;opacity:.8}
    footer{margin-top:12px;text-align:center;font-size:.76rem;color:var(--muted)}
    footer a{color:var(--muted);text-decoration:none;transition:.2s}
    footer a:hover{color:#ccc;text-decoration:underline}
    .credit{font-size:.7rem;color:#777;margin-top:8px;opacity:.6;font-style:italic}
    .hidden{display:none !important}
  </style>
</head>
<body>
<div class="stars" id="stars"></div>
<div id="loader" tabindex="0" role="button" aria-label="Enter">
  <div id="logo">GOONING</div>
  <div style="margin-top:18px;color:#999;font-size:1.15rem;">Click or press Enter</div>
</div>
<div id="app" class="hidden">
  <h1>Gooning Hub</h1>
  <div class="tabs">
    <div class="tab active" data-tab="leaderboard">Leaderboard</div>
    <div class="tab" data-tab="games">Mini‑Games</div>
  </div>

  <!-- ────── LEADERBOARD PANEL ────── -->
  <div id="leaderboard" class="panel active">
    <div id="loading" style="text-align:center;color:#bbb;margin:22px 0;font-size:.97rem;">
      Loading leaderboard...
    </div>
    <div class="table-container">
      <table id="board" class="hidden">
        <thead><tr><th style="width:90px">Rank</th><th>Player</th></tr></thead>
        <tbody id="rows"></tbody>
      </table>
    </div>
    <div class="last-updated" id="updated"></div>
  </div>

  <!-- ────── MINI‑GAMES PANEL (ONLY GOON CLICKER) ────── -->
  <div id="games" class="panel">
    <div class="game-grid">
      <div class="game-box" onclick="window.location='goon-clicker.html'">
        <h3>Goon Clicker</h3>
        <p>Idle clicker — build your goon empire!</p>
      </div>
    </div>
  </div>

  <footer>
    Auto‑refreshed • <a href="leaderboard.json" target="_blank">view raw JSON</a>
    <div class="credit">Site made by Xen</div>
  </footer>
</div>

<script>
  const $ = id => document.getElementById(id);
  function createStar(){
    const s=document.createElement('div');s.className='star';
    const sz=Math.random()*3+1;
    s.style.width=s.style.height=`${sz}px`;
    s.style.left=`${Math.random()*100}vw`;
    s.style.animationDuration=`${Math.random()*8+5}s`;
    s.style.animationDelay=`${Math.random()*5}s`;
    s.style.opacity=Math.random()*0.6+0.3;
    $('#stars').appendChild(s);
    setTimeout(()=>s.remove(),15000);
  }
  setInterval(createStar,300);
  for(let i=0;i<40;i++)setTimeout(createStar,i*100);

  document.querySelectorAll('.tab').forEach(tab=>{
    tab.addEventListener('click',()=>{
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
      tab.classList.add('active');
      $(tab.dataset.tab).classList.add('active');
    });
  });

  function getDiscordAvatar(uid,hash,size=80){
    if(!uid||!hash)return'https://cdn.discordapp.com/embed/avatars/0.png';
    const ext=hash.startsWith('a_')?'gif':'webp';
    return`https://cdn.discordapp.com/avatars/${uid}/${hash}.${ext}?size=${size}`;
  }

  function enterLeaderboard(){
    const l=$('loader');l.style.opacity='0';
    setTimeout(()=>{l.classList.add('hidden');$('app').classList.remove('hidden');fetchLeaderboard();setInterval(fetchLeaderboard,90000);},1000);
  }
  $('loader').addEventListener('click',enterLeaderboard);
  $('loader').addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();enterLeaderboard();}});
  setTimeout(()=>$('loader').focus(),100);

  async function fetchLeaderboard(){
    const loading=$('loading'),board=$('board'),rows=$('rows'),updated=$('updated');
    try{
      const res=await fetch('leaderboard.json?'+Date.now());
      if(!res.ok)throw'';
      const data=await res.json();
      let list=Array.isArray(data)?data:(data.leaderboard||[]);
      const time=data.updated||new Date().toLocaleTimeString([],[{hour:'2-digit',minute:'2-digit'}]);
      const padded=[];
      for(let i=0;i<100;i++)padded.push(list[i]||{rank:i+1});
      rows.innerHTML=padded.map((p,idx)=>{
        const has=p.name||p.discord;
        const av=getDiscordAvatar(p.discordId,p.avatar);
        const rank=p.rank||idx+1;
        return`<tr>
          <td class="rank">${rank}</td>
          <td class="name">
            ${has?`
            <div class="avatar"><img src="${av}" onerror="this.src='https://cdn.discordapp.com/embed/avatars/0.png'" alt="${e(p.name||'User')}"></div>
            <div>
              <div style="font-weight:600;font-size:1rem;">${e(p.name||'Unknown')}</div>
              ${p.discord?`<div class="discord-tag"><i class="fab fa-discord"></i>${e(p.discord)}</div>`:''}
            </div>`:`<div class="empty-slot">— Empty Slot —</div>`}
          </td>
        </tr>`;
      }).join('');
      updated.textContent=`Last updated: ${time}`;
      loading.classList.add('hidden');board.classList.remove('hidden');
    }catch{
      loading.textContent='Failed to load leaderboard.';loading.style.color='#f88';
    }
  }

  function e(t){const d=document.createElement('div');d.textContent=t;return d.innerHTML;}
</script>
</body>
</html>
