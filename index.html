<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Gooning Mini-Games</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#050505;--glass:#111111ee;--glass-border:rgba(255,255,255,.08);
      --text:#f5f5f5;--muted:#aaaaaa;--goon:#ff4d8c;--stamina:#4dff88;
      --transition:.35s cubic-bezier(.25,.8,.25,1);
      font-family:'Inter',system-ui,sans-serif;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html,body{min-height:100vh;background:var(--bg);overflow:hidden;color:var(--text);
      display:flex;justify-content:center;align-items:center;padding:12px}
    .stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
    .star{position:absolute;background:#fff;border-radius:50%;opacity:0;animation:fall linear infinite}
    @keyframes fall{0%{transform:translateY(-100px) scale(.2);opacity:0}10%{opacity:1}90%{opacity:.3}100%{transform:translateY(100vh) scale(.8);opacity:0}}

    #app{
      max-width:900px;width:100%;position:relative;z-index:1;
      backdrop-filter:blur(20px);background:var(--glass);
      border:1px solid var(--glass-border);border-radius:22px;
      padding:30px 26px;
      box-shadow:0 16px 60px rgba(0,0,0,.8),inset 0 0 35px rgba(255,255,255,.05);
      transition:all .5s var(--transition);transform:scale(1.04);margin:auto
    }
    #app:hover{transform:scale(1.06) translateY(-6px);box-shadow:0 24px 80px rgba(0,0,0,.9),0 0 40px rgba(255,255,255,.12)}

    h1{
      text-align:center;font-weight:800;font-size:2.3rem;letter-spacing:2px;
      background:linear-gradient(90deg,var(--goon),#ff8cb8);background-clip:text;-webkit-background-clip:text;color:transparent;
      text-shadow:0 0 30px rgba(255,77,140,.4);margin-bottom:24px
    }
    .back{
      display:block;width:fit-content;margin:0 auto 20px;
      padding:10px 20px;background:rgba(255,255,255,.08);border:1px solid var(--glass-border);
      border-radius:12px;color:var(--muted);font-size:.9rem;text-decoration:none;
      transition:.3s;backdrop-filter:blur(4px)
    }
    .back:hover{background:rgba(255,255,255,.15);color:#fff;transform:translateY(-2px)}

    .game{
      background:rgba(0,0,0,.2);border:1px solid var(--glass-border);border-radius:18px;
      padding:24px;margin:20px 0;text-align:center;backdrop-filter:blur(8px)
    }
    .game h3{
      font-size:1.4rem;margin-bottom:12px;color:var(--goon);text-shadow:0 0 12px var(--goon)
    }

    /* ── GOON CLICKER (Cookie-Clicker style) ── */
    #goon-clicker{display:grid;grid-template-columns:1fr 1fr;gap:20px;align-items:start}
    #goon-big{
      width:180px;height:180px;margin:auto;cursor:pointer;
      background:radial-gradient(circle,var(--goon),#ff2a6d);border-radius:50%;
      box-shadow:0 0 30px var(--goon);transition:transform .15s
    }
    #goon-big:active{transform:scale(.9)}
    #goon-stats{font-size:1.1rem;margin:10px 0}
    .upgrade{
      background:rgba(255,255,255,.07);border:1px solid var(--glass-border);
      border-radius:12px;padding:12px;margin:8px 0;cursor:pointer;
      transition:.3s;display:flex;justify-content:space-between;align-items:center
    }
    .upgrade:hover{background:rgba(255,255,255,.14);transform:translateY(-2px)}
    .upgrade.disabled{opacity:.5;cursor:not-allowed}
    #prestige-btn{margin-top:20px;padding:12px 30px;background:#ffd700;color:#000;border:none;border-radius:12px;font-weight:600;cursor:pointer}
    #prestige-btn:hover{background:#ffea80}

    /* ── STAMINA HOLD (Rhythm) ── */
    #stamina-zone{
      width:100%;height:60px;background:#222;border-radius:12px;position:relative;overflow:hidden;
      margin:20px 0;border:2px solid var(--stamina)
    }
    #stamina-bar{
      height:100%;width:0%;background:var(--stamina);transition:width .05s linear;
      box-shadow:0 0 20px var(--stamina)
    }
    #stamina-target{
      position:absolute;top:0;left:40%;width:20%;height:100%;background:rgba(255,255,255,.2);
      border-left:2px solid #fff;border-right:2px solid #fff
    }

    /* ── EDGE TIMER (Dodge) ── */
    #edge-canvas{width:100%;height:300px;background:#111;border-radius:12px;margin:20px 0}
    #edge-score{font-size:1.2rem;margin-top:8px}

    .btn{
      padding:13px 32px;margin:10px;background:rgba(255,77,140,.25);border:1px solid rgba(255,77,140,.5);
      border-radius:14px;color:#ff4d8c;font-weight:600;cursor:pointer;transition:.3s;
      backdrop-filter:blur(6px);box-shadow:0 0 20px rgba(255,77,140,.2)
    }
    .btn:hover{background:rgba(255,77,140,.4);color:#fff;transform:translateY(-3px);box-shadow:0 0 30px rgba(255,77,140,.4)}
  </style>
</head>
<body>
  <div class="stars" id="stars"></div>

  <div id="app">
    <h1>Gooning Mini-Games</h1>
    <a href="index.html" class="back">Back to Leaderboard</a>

    <!-- GOON CLICKER -->
    <div class="game" id="goon-clicker">
      <h3>Goon Clicker</h3>
      <div id="goon-big"></div>
      <div id="goon-stats">Goons: <span id="goons">0</span> | GPS: <span id="gps">0</span></div>
      <div id="upgrades"></div>
      <button id="prestige-btn" class="btn">Prestige (0)</button>
    </div>

    <!-- STAMINA HOLD -->
    <div class="game">
      <h3>Stamina Hold</h3>
      <p>Hold <kbd>SPACE</kbd> when the bar is in the green zone!</p>
      <div id="stamina-zone"><div id="stamina-bar"></div><div id="stamina-target"></div></div>
      <p>Score: <span id="stamina-score">0</span> | Combo: <span id="stamina-combo">0</span></p>
    </div>

    <!-- EDGE TIMER -->
    <div class="game">
      <h3>Edge Timer</h3>
      <p>Use arrow keys to dodge the waves!</p>
      <canvas id="edge-canvas"></canvas>
      <p id="edge-score">Score: 0</p>
    </div>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    function createStar(){
      const s=document.createElement('div');s.className='star';
      const sz=Math.random()*3+1;
      s.style.width=s.style.height=`${sz}px`;
      s.style.left=`${Math.random()*100}vw`;
      s.style.animationDuration=`${Math.random()*8+5}s`;
      s.style.animationDelay=`${Math.random()*5}s`;
      s.style.opacity=Math.random()*0.6+0.3;
      $('#stars').appendChild(s);
      setTimeout(()=>s.remove(),15000);
    }
    setInterval(createStar,300);
    for(let i=0;i<40;i++)setTimeout(createStar,i*100);

    /* ─────────────────────── GOON CLICKER (Cookie-Clicker) ─────────────────────── */
    let goons = 0, gps = 0, prestige = 0;
    const upgrades = [
      {id:'auto',name:'Auto-Gooner',cost:15,inc:0.1,owned:0},
      {id:'factory',name:'Goon Factory',cost:100,inc:1,owned:0},
      {id:'portal',name:'Goon Portal',cost:1000,inc:10,owned:0}
    ];
    const big = $('goon-big'), goonDisp = $('goons'), gpsDisp = $('gps'), upDiv = $('upgrades'), prestigeBtn = $('prestige-btn');

    big.addEventListener('click',()=>{ goons++; update(); });
    function update(){
      goonDisp.textContent = Math.floor(goons).toLocaleString();
      gpsDisp.textContent = gps.toFixed(1);
      prestigeBtn.textContent = `Prestige (${prestige})`;
      upgrades.forEach(u=>{
        const el = $(u.id);
        el.querySelector('.cost').textContent = u.cost;
        el.classList.toggle('disabled', goons < u.cost);
      });
    }
    function buy(id){
      const u = upgrades.find(x=>x.id===id);
      if(goons >= u.cost){
        goons -= u.cost; u.owned++; u.cost = Math.ceil(u.cost*1.15);
        gps += u.inc;
        update();
      }
    }
    upgrades.forEach(u=>{
      const div = document.createElement('div'); div.className='upgrade'; div.id=u.id;
      div.innerHTML = `<span>${u.name} (${u.owned})</span><span class="cost">${u.cost}</span>`;
      div.addEventListener('click',()=>buy(u.id));
      upDiv.appendChild(div);
    });
    prestigeBtn.addEventListener('click',()=>{
      if(goons >= 1e6){
        prestige++; goons = 0; gps = 0;
        upgrades.forEach(u=>{u.owned=0;u.cost=[15,100,1000][upgrades.indexOf(u)];});
        update();
      }
    });
    setInterval(()=>{ goons += gps/10; update(); },100);
    update();

    /* ─────────────────────── STAMINA HOLD (Rhythm) ─────────────────────── */
    let staminaScore = 0, combo = 0, holding = false, barSpeed = 2;
    const bar = $('stamina-bar'), zone = $('stamina-zone'), scoreEl = $('stamina-score'), comboEl = $('stamina-combo');
    function resetStamina(){
      bar.style.width = '0%'; barSpeed = 1 + Math.random()*2;
      setTimeout(startStamina, 800 + Math.random()*1200);
    }
    function startStamina(){
      let w = 0;
      const int = setInterval(()=>{
        w += barSpeed;
        bar.style.width = w + '%';
        if(w >= 100){ clearInterval(int); checkStamina(); }
      },20);
    }
    function checkStamina(){
      const pos = parseFloat(bar.style.width);
      if(pos >= 40 && pos <= 60){
        const points = 100 + combo*10;
        staminaScore += points; combo++;
        scoreEl.textContent = staminaScore;
        comboEl.textContent = combo;
      }else{
        combo = 0; comboEl.textContent = 0;
      }
      resetStamina();
    }
    document.addEventListener('keydown',e=>{ if(e.key===' ' && !holding){ e.preventDefault(); holding=true; startStamina(); } });
    document.addEventListener('keyup',e=>{ if(e.key===' ' && holding){ holding=false; } });
    resetStamina();

    /* ─────────────────────── EDGE TIMER (Dodge) ─────────────────────── */
    const canvas = $('edge-canvas'), ctx = canvas.getContext('2d');
    canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight;
    let playerY = canvas.height/2, waves = [], edgeScore = 0, gameOver = false;
    function Wave(){ this.x = canvas.width; this.y = Math.random()*canvas.height; this.speed = 2+Math.random()*3; }
    function spawnWave(){ waves.push(new Wave()); }
    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // player
      ctx.fillStyle = '#ff4d8c';
      ctx.beginPath(); ctx.arc(80, playerY, 20, 0, Math.PI*2); ctx.fill();
      // waves
      ctx.fillStyle = '#ff1a1a';
      waves.forEach((w,i)=>{
        ctx.beginPath(); ctx.arc(w.x, w.y, 25, 0, Math.PI*2); ctx.fill();
        w.x -= w.speed;
        if(w.x < -50) waves.splice(i,1);
        if(Math.hypot(w.x-80, w.y-playerY) < 45){ gameOver=true; }
      });
      if(!gameOver) requestAnimationFrame(draw);
      else { $('edge-score').textContent = `Game Over! Score: ${edgeScore}`; }
    }
    document.addEventListener('keydown',e=>{
      if(e.key==='ArrowUp' && playerY>30) playerY-=15;
      if(e.key==='ArrowDown' && playerY<canvas.height-30) playerY+=15;
    });
    setInterval(spawnWave,1200);
    setInterval(()=>{ if(!gameOver) edgeScore++; $('edge-score').textContent = `Score: ${edgeScore}`; },100);
    draw();
  </script>
</body>
</html>
